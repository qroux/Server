{"version":3,"sources":["reducers/authReducer.js","reducers/index.js","actions/types.js","reducers/streamReducer.js","apis/streams.js","history.js","actions/index.js","components/GoogleAuth.jsx","components/Navbar.jsx","components/streams/StreamList.jsx","components/streams/StreamShow.jsx","components/streams/StreamForm.jsx","components/streams/StreamCreate.jsx","components/streams/StreamEdit.jsx","components/Modal.jsx","components/streams/StreamDelete.jsx","components/App.js","index.js"],"names":["INITIAL_STATE","isSignedIn","userId","combineReducers","auth","state","action","type","payload","form","formReducer","streams","_","mapKeys","id","omit","axios","create","baseURL","createBrowserHistory","fetchStream","dispatch","a","get","response","data","GoogleAuth","componentDidMount","window","gapi","load","client","init","clientId","scope","then","auth2","getAuthInstance","onAuthChange","listen","props","signIn","currentUser","getId","signOut","onSignIn","onSignOut","this","onClick","className","style","marginRight","renderAuthButton","React","Component","connect","Navbar","to","StreamList","fetchStreams","textAlign","stream","currentUserId","map","key","renderAdmin","title","description","renderList","renderCreate","Object","values","StreamShow","videoRef","createRef","match","params","buildPlayer","player","destroy","flv","createPlayer","url","attachMediaElement","current","ref","width","controls","renderStream","ownProps","StreamForm","renderInput","input","label","meta","error","touched","autoComplete","renderError","onSubmit","formValues","handleSubmit","Field","name","component","reduxForm","validate","errors","StreamCreate","createStream","getState","post","history","push","StreamEdit","editStream","initialValues","pick","patch","Modal","ReactDOM","createPortal","onDismiss","e","stopPropagation","content","document","querySelector","StreamDelete","onClickHandler","deleteStream","renderTitle","renderContent","renderAction","delete","App","path","exact","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","render"],"mappings":"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","file":"static/js/main.3e33f5e3.chunk.js","sourcesContent":["import { SIGN_IN, SIGN_OUT } from '../actions/types'\n\nconst INITIAL_STATE = {\n  isSignedIn: null,\n  userId: null\n};\n\nexport default (state = INITIAL_STATE, action) => {\n  switch (action.type) {\n    case SIGN_IN:\n      return { ...state, isSignedIn: true, userId: action.payload };\n    case SIGN_OUT:\n      return { ...state, isSignedIn: false, userId: null };\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from 'redux';\nimport { reducer as formReducer } from 'redux-form';\nimport authReducer from './authReducer';\nimport streamReducer from './streamReducer';\n\nexport default combineReducers({\n  auth: authReducer,\n  form: formReducer,\n  streams: streamReducer\n});\n","export const SIGN_IN = 'SIGN_IN';\nexport const SIGN_OUT = 'SIGN_OUT';\nexport const CREATE_STREAM = 'CREATE_STREAM';\nexport const FETCH_STREAMS = 'FETCH_STREAMS';\nexport const FETCH_STREAM = 'FETCH_STREAM';\nexport const DELETE_STREAM = 'DELETE_STREAM';\nexport const EDIT_STREAM = 'EDIT_STREAM';\n","import _ from 'lodash';\nimport {\n  FETCH_STREAM,\n  FETCH_STREAMS,\n  CREATE_STREAM,\n  EDIT_STREAM,\n  DELETE_STREAM\n} from '../actions/types';\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case FETCH_STREAMS:\n      return { ...state, ..._.mapKeys(action.payload, 'id') };\n    case FETCH_STREAM:\n      return { ...state, [action.payload.id]: action.payload };\n    case CREATE_STREAM:\n      return { ...state, [action.payload.id]: action.payload };\n    case EDIT_STREAM:\n      return { ...state, [action.payload.id]: action.payload };\n    case DELETE_STREAM:\n      return _.omit(state, action.payload);\n    default:\n      return state;\n  }\n};\n","import axios from 'axios';\n\nexport default axios.create({\n  baseURL: 'https://react-stream-server.herokuapp.com'\n});\n","import { createBrowserHistory } from 'history';\n\nexport default createBrowserHistory();\n","import streams from '../apis/streams'\nimport history from '../history'\nimport {\n  SIGN_IN,\n  SIGN_OUT,\n  CREATE_STREAM,\n  FETCH_STREAMS,\n  FETCH_STREAM,\n  DELETE_STREAM,\n  EDIT_STREAM\n} from './types'\n\nexport const signIn = (userId) => {\n  return {\n    type: SIGN_IN,\n    payload: userId\n  };\n};\n\nexport const signOut = () => {\n  return {\n    type: SIGN_OUT\n  };\n};\n\nexport const createStream = formValues => async (dispatch, getState) => {\n  const { userId } = getState().auth;\n  const response = await streams.post('/streams', { ...formValues, userId });\n\n  dispatch({ type: CREATE_STREAM, payload: response.data});\n  history.push('/');\n};\n\nexport const fetchStreams = () => async dispatch => {\n  const response = await streams.get('/streams');\n\n  dispatch({ type: FETCH_STREAMS, payload: response.data});\n};\n\nexport const fetchStream = (id) => async dispatch => {\n  const response = await streams.get(`/streams/${id}`);\n\n  dispatch({ type: FETCH_STREAM, payload: response.data});\n};\n\nexport const editStream = (id, formValues) => async dispatch => {\n  const response = await streams.patch(`/streams/${id}`, formValues);\n\n  dispatch({ type: EDIT_STREAM, payload: response.data});\n  history.push('/');\n};\n\n\nexport const deleteStream = (id) => async dispatch => {\n  await streams.delete(`/streams/${id}`);\n\n  dispatch({ type: DELETE_STREAM, payload: id});\n  history.push('/');\n};\n","import React from 'react';\n// redux\nimport { connect } from 'react-redux';\nimport { signIn, signOut } from '../actions';\n\nclass GoogleAuth extends React.Component {\n  componentDidMount = () => {\n    window.gapi.load('client:auth2', () => {\n      window.gapi.client.init({\n        clientId: '241696005084-ebg1a0ippssjkdt3t37g4g4a0qi04agt.apps.googleusercontent.com',\n        scope: 'email'\n      }).then(() => {\n        this.auth = window.gapi.auth2.getAuthInstance();\n\n        this.onAuthChange(this.auth.isSignedIn.get());\n        this.auth.isSignedIn.listen(this.onAuthChange);\n      });\n    });\n  };\n\n  onAuthChange = (isSignedIn) => {\n   if (isSignedIn) {\n    this.props.signIn(this.auth.currentUser.get().getId());\n   } else {\n    this.props.signOut();\n   }\n  };\n\n  onSignIn = () => {\n    this.auth.signIn()\n  };\n\n  onSignOut = () => {\n    this.auth.signOut()\n  };\n\n  renderAuthButton() {\n    if (this.props.isSignedIn === true) {\n      return (\n        <button onClick={this.onSignOut} className=\"ui red medium button\">\n          <i className=\"power off icon\" style={{ marginRight: '15px' }}></i>\n          Sign Out\n        </button>\n      );\n    } else if (this.props.isSignedIn === false) {\n      return (\n        <button onClick={this.onSignIn} className=\"ui violet medium button\">\n          <i style={{ marginRight: '15px' }} className=\"google icon\"></i>\n          Sign In\n        </button>\n      );\n    } else {\n      return (\n        <div>\n          <div className=\"ui active mini inline loader\"></div>\n        </div>\n      );\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"item\">\n        {this.renderAuthButton()}\n      </div>\n    );\n  }\n};\n\nconst mapStateToProps = (state) => {\n  return { isSignedIn: state.auth.isSignedIn };\n};\n\nexport default connect(mapStateToProps, { signIn, signOut })(GoogleAuth);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\n// components import\nimport GoogleAuth from './GoogleAuth';\n\nconst Navbar = () => {\n  return (\n    <div className=\"ui menu\">\n      <Link to=\"/\" className=\"link item\">\n        <i className=\"home icon\"></i>\n      </Link>\n      <div className=\"right menu\">\n        <GoogleAuth />\n      </div>\n    </div>\n  );\n};\n\nexport default Navbar;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { fetchStreams } from '../../actions';\n\nclass StreamList extends React.Component {\n  componentDidMount() {\n    this.props.fetchStreams();\n  }\n\n  renderCreate() {\n    if (this.props.isSignedIn) {\n      return (\n        <div style={{ textAlign: 'right' }}>\n          <Link to=\"/streams/new\" className=\"ui button primary\">\n            Create Stream\n          </Link>\n        </div>\n      );\n    }\n  };\n\n  renderAdmin(stream) {\n    if (this.props.currentUserId === stream.userId) {\n      return (\n        <div className=\"right floated content\">\n          <Link to={`/streams/edit/${stream.id}`} className=\"ui button primary\">\n            Edit\n          </Link>\n          <Link to={`/streams/delete/${stream.id}`} className=\"ui button negative\">\n            Delete\n          </Link>\n        </div>\n      );\n    }\n  };\n\n  renderList() {\n    return this.props.streams.map(stream => {\n      return (\n        <div className=\"item\" key={stream.id}>\n          {this.renderAdmin(stream)}\n          <i className=\"large middle aligned icon camera\" />\n          <div className=\"content\">\n            <Link to={`streams/${stream.id}`}>\n              {stream.title}\n            </Link>\n            <div className=\"description\">\n              {stream.description}\n            </div>\n          </div>\n        </div>\n      );\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <h2>Streams</h2>\n        <div className=\"ui celled list\">\n          {this.renderList()}\n        </div>\n        {this.renderCreate()}\n      </div>\n    );\n  };\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    streams: Object.values(state.streams),\n    currentUserId: state.auth.userId,\n    isSignedIn: state.auth.isSignedIn\n  }\n};\n\nexport default connect(mapStateToProps, { fetchStreams })(StreamList);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { fetchStream } from '../../actions';\n// streaming setup\nimport flv from 'flv.js';\n\nclass StreamShow extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.videoRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const { id } = this.props.match.params;\n    this.props.fetchStream(id);\n    this.buildPlayer();\n  }\n\n  componentDidUpdate() {\n    this.buildPlayer();\n  }\n\n  componentWillUnmount() {\n    this.player.destroy();\n  }\n\n  buildPlayer() {\n    if (this.player || !this.props.stream) {\n      return;\n    }\n\n    const { id } = this.props.match.params;\n    this.player = flv.createPlayer({\n                    type: 'flv',\n                    url: `http://localhost:8000/live/${id}.flv`\n                  });\n    this.player.attachMediaElement(this.videoRef.current);\n    this.player.load();\n  }\n\n  renderStream() {\n    if (!this.props.stream) {\n      return (\n        <div className=\"ui active loader\"></div>\n      );\n    }\n\n    const { title, description } = this.props.stream\n\n    return (\n      <div>\n        <video ref={this.videoRef} style={{ width: '100%'}} controls />\n        <h1>{title} Stream</h1>\n        <h5>{description}</h5>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderStream()}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return { stream: state.streams[ownProps.match.params.id] };\n};\n\nexport default connect(mapStateToProps, { fetchStream })(StreamShow);\n","import React from 'react';\nimport { Field, reduxForm } from 'redux-form';\n\nclass StreamForm extends React.Component {\n  renderError({ error, touched }) {\n    if (touched && error) {\n      return (\n        <div className=\"ui error message\">\n          <div className=\"header\">{error}</div>\n        </div>\n      );\n    }\n  };\n\n  renderInput = ({ input, label, meta }) => {\n    const className = `field ${meta.error && meta.touched ? 'error': ''}`\n    return (\n      <div className={className}>\n        <label>{label}</label>\n        <input\n          {...input}\n          autoComplete=\"off\"\n          className=\"ui field\"\n        />\n        {this.renderError(meta)}\n      </div>\n    );\n  };\n\n  onSubmit = (formValues) => {\n    this.props.onSubmit(formValues);\n  };\n\n  render() {\n    return (\n      <div>\n        <div>\n          <form\n            onSubmit={this.props.handleSubmit(this.onSubmit)}\n            className=\"ui form error\"\n          >\n            <Field\n              name=\"title\"\n              component={this.renderInput}\n              label=\"Choose the name of your channel\"\n            />\n            <Field\n              name=\"description\"\n              component={this.renderInput}\n              label=\"Add a description\"\n            />\n            <button className=\"ui button primary\">Submit</button>\n          </form>\n        </div>\n      </div>\n    );\n  };\n};\n\nconst validate = (formValues) => {\n  const errors= {};\n\n  if (!formValues.title) {\n    errors.title = 'You must enter a title'\n  };\n\n  if (!formValues.description) {\n    errors.description = 'You must enter a description'\n  };\n\n  return errors;\n};\n\nexport default reduxForm({\n  form: 'streamForm',\n  validate\n})(StreamForm);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { createStream } from '../../actions';\nimport StreamForm from './StreamForm';\n\nclass StreamCreate extends React.Component {\n  onSubmit = (formValues) => {\n    this.props.createStream(formValues);\n  };\n\n  render() {\n    return (\n      <div>\n        <h2>Create a Stream</h2>\n        <div>\n          <StreamForm onSubmit={this.onSubmit}/>\n        </div>\n      </div>\n    );\n  };\n};\n\nexport default connect(null, { createStream })(StreamCreate);\n","import _ from 'lodash';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { fetchStream, editStream } from '../../actions';\nimport StreamForm from './StreamForm';\n\nclass StreamEdit extends React.Component {\n  componentDidMount() {\n    this.props.fetchStream(this.props.match.params.id);\n  }\n\n  onSubmit = (formValues) => {\n    this.props.editStream(this.props.match.params.id, formValues);\n  };\n\n  render() {\n    if (!this.props.stream) {\n      return <div>Loading</div>\n    }\n\n    return (\n      <div>\n        <h2>Edit your stream</h2>\n        <StreamForm\n          onSubmit={this.onSubmit}\n          initialValues={_.pick(this.props.stream, 'title', 'description')}\n        />\n      </div>\n    );\n  };\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  return { stream: state.streams[ownProps.match.params.id] };\n};\n\nexport default connect(mapStateToProps, { fetchStream, editStream })(StreamEdit);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst Modal = props => {\n  return ReactDOM.createPortal(\n    <div onClick={props.onDismiss} className=\"ui dimmer modals visible active\">\n      <div onClick={(e) => e.stopPropagation()} className=\"ui standard modal visible active\">\n        <div className=\"header\">\n          {props.title}\n        </div>\n        <div className=\"content\">\n          {props.content}\n        </div>\n        <div className=\"actions\">\n          {props.action}\n        </div>\n      </div>\n    </div>,\n    document.querySelector('#modal')\n  );\n};\n\nexport default Modal;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport history from '../../history';\n// actions\nimport { connect } from 'react-redux';\nimport { fetchStream, deleteStream } from '../../actions';\n// Components\nimport Modal from '../Modal';\n\nclass StreamDelete extends React.Component {\n  componentDidMount() {\n    this.props.fetchStream(this.props.match.params.id);\n  }\n\n  onClickHandler = () => {\n    if (!this.props.stream || this.props.currentUserId !== this.props.stream.userId) {\n      return\n    } else {\n      this.props.deleteStream(this.props.stream.id);\n    }\n  };\n\n  renderAction() {\n    return (\n      <div>\n        <button onClick={this.onClickHandler} className=\"ui button negative\">Delete</button>\n        <Link to=\"/\" className=\"ui button cancel\">Cancel</Link>\n      </div>\n    );\n  }\n\n  renderTitle() {\n    if (!this.props.stream) {\n      return 'Delete stream'\n    }\n\n    return `Delete \"${this.props.stream.title}\" stream`\n  }\n\n  renderContent() {\n    if (!this.props.stream) {\n      return 'Are you sure you want to delete channel ?'\n    }\n\n    return `Are you sure you want to delete \"${this.props.stream.title}\" channel ?`\n  }\n\n  render() {\n    return (\n      <div>\n        <Modal\n          onDismiss={() => history.push('/')}\n          title={this.renderTitle()}\n          content={this.renderContent()}\n          action={this.renderAction()}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    stream: state.streams[ownProps.match.params.id],\n    currentUserId: state.auth.userId,\n  };\n};\n\nexport default connect(mapStateToProps, { fetchStream, deleteStream })(StreamDelete);\n","import React from 'react';\nimport { Router, Route, Switch } from 'react-router-dom';\n\n// components import\nimport Navbar from './Navbar'\nimport StreamList from './streams/StreamList'\nimport StreamShow from './streams/StreamShow'\nimport StreamCreate from './streams/StreamCreate'\nimport StreamEdit from './streams/StreamEdit'\nimport StreamDelete from './streams/StreamDelete'\n\n// Custom history object\nimport history from '../history'\n\nconst App = () => {\n  return (\n    <div>\n      <Router history={history}>\n        <Navbar />\n        <div className=\"ui container\">\n          <Switch>\n            <Route path=\"/\" exact component={StreamList} />\n            <Route path=\"/streams/new\" exact component={StreamCreate} />\n            <Route path=\"/streams/edit/:id\" exact component={StreamEdit} />\n            <Route path=\"/streams/delete/:id\" exact component={StreamDelete} />\n            <Route path=\"/streams/:id\" exact component={StreamShow} />\n          </Switch>\n        </div>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n// redux\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport reduxThunk from 'redux-thunk';\n// file import\nimport reducers from './reducers';\n\n// Components import\nimport App from './components/App';\n\n// Creating redux store\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n  reducers,\n  composeEnhancers(applyMiddleware(reduxThunk))\n);\n\n// mounting app to root\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.querySelector('#root')\n);\n"],"sourceRoot":""}